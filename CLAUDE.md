# PLY Viewer - 開発ルール

このファイルには、PLY Viewerプロジェクトの開発における重要なルールとガイドラインが記載されています。

## プロジェクト概要

WebベースのPLYファイル3Dビューワー。直感的な箱型マニピュレーターを使用してXYZ軸でのトリミング機能を提供。

### 主要機能
- PLYファイル読み込み（ASCII/Binary対応）
- 3Dモデル表示（ポイントクラウド・サーフェス切り替え）
- 箱型トリミングマニピュレーター
- リアルタイムプレビュー

## 開発ルール

### 1. コミットルール
**重要**: 毎回の出力・変更後に必ずコミットを実行すること

```bash
# 変更をステージングに追加
git add .

# コミットメッセージのフォーマット
git commit -m "機能追加: [追加した機能の説明]

🤖 Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>"
```

### 2. コード品質ルール
- **既存のコード規約に従う**: 既存ファイルのスタイルを維持
- **Three.js r160を使用**: バージョンを変更しない
- **ES6+モジュール構文**: import/export文を使用
- **適切なコメント**: 複雑な処理には日本語コメントを追加

### 3. 機能実装ルール
- **段階的実装**: 大きな機能は小さな単位に分割
- **後方互換性**: 既存機能を破壊しない
- **エラーハンドリング**: 適切な例外処理を実装
- **パフォーマンス**: 大容量PLYファイルでも動作するよう最適化

### 4. UI/UX ルール
- **直感的操作**: 右クリックよりもシンプルな操作を優先
- **視覚的フィードバック**: 操作中は色変更などで状態を明確に
- **レスポンシブ**: モバイルデバイスでも動作

### 5. ファイル構成ルール
- **app.js**: メインアプリケーションロジック
- **index.html**: UIとスタイル定義
- **README.md**: ユーザー向けドキュメント
- **CLAUDE.md**: 開発ルール（このファイル）

## 最近の主要変更

### 箱移動機能の実装
- 面クリック → 矢印表示
- 同じ面再クリック → 箱移動モード
- 移動中は面・辺が青色に変化

### 操作フロー
1. 面をクリック → 矢印ハンドル表示
2. 矢印ドラッグ → 面拡縮
3. 同じ面を再クリック → 箱移動（青色表示）
4. 空白クリック → 選択解除

## 注意事項

- **セキュリティ**: 悪意のあるコードの作成・改良は禁止
- **メモリ管理**: 大容量ファイル処理時のメモリリーク防止
- **ブラウザ互換性**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+

## 次回開発時の参考

このプロジェクトを再開する際は：
1. このCLAUDE.mdを最初に確認
2. README.mdで現在の機能を把握
3. app.jsの主要クラス構造を理解
4. 変更後は必ずコミット実行